@page "/"
@using System
@inject NavigationManager Nav
@using Microsoft.AspNetCore.Components.Authorization

<section class="landing">
    <div class="landing__content">
        <span class="landing__badge">Welcome to Mongo Users</span>
        <h1>All of your users in one delightful place</h1>
        <p class="landing__lead">Build and maintain your MongoDB-backed community with an elegant dashboard that keeps everything organised and secure.</p>

        <AuthorizeView Context="authState">
            <Authorized>
                <button type="button" class="landing__primary" @onclick="NavigateToUsers">Open the dashboard</button>
                <p class="landing__footnote">Signed in as <strong>@authState.User.Identity?.Name</strong>. Jump straight into managing your team.</p>
            </Authorized>
            <NotAuthorized>
                <div class="landing__actions">
                    <button type="button" class="landing__primary" @onclick="TriggerLogin">Log in to get started</button>
                </div>
                <p class="landing__footnote">Need access? Use the login window to create a user and unlock the full dashboard.</p>
            </NotAuthorized>
        </AuthorizeView>
    </div>

    <div class="landing__visual">
        <div class="landing__card">
            <h2>User analytics at a glance</h2>
            <ul>
                <li>Secure BCrypt hashing keeps credentials safe at rest.</li>
                <li>Manage MongoDB users with quick create and delete flows.</li>
                <li>Responsive interface tailored for modern teams.</li>
            </ul>
            <div class="landing__meta">
                <span class="landing__meta-label">Access control</span>
                <p>Only authenticated users can open the management tools beyond this page.</p>
            </div>
        </div>
    </div>
</section>

@code {
    [CascadingParameter]
    public Action? RequestLogin { get; set; }

    private void TriggerLogin()
    {
        RequestLogin?.Invoke();
    }

    private void NavigateToUsers()
    {
        Nav.NavigateTo("/users");
    }
}

<style>
    :root {
        --sage-50: #f5faf7;
        --sage-100: #eaf4ef;
        --sage-200: #d7e9df;
        --sage-300: #bed8c9;
        --sage-400: #a3c7b2;
        --sage-500: #6ea98f;
        --sage-600: #4d8d76;
        --sage-700: #2e6b57;
        --sage-800: #245444;
        --ink: #1f2a24;
    }

    .landing {
        min-height: calc(100vh - 4rem);
        display: flex;
        align-items: flex-start;
        justify-content: center;
        padding: 3rem 1rem 4rem;
        background: var(--sage-50);
    }

    .landing__content {
        width: min(980px, 100%);
        background: linear-gradient(180deg, var(--sage-100), var(--sage-50));
        border: 1px solid var(--sage-300);
        box-shadow: 0 10px 30px rgba(0,0,0,.08);
        padding: 2.25rem 2rem;
    }

    .landing__badge {
        display: inline-block;
        background: var(--sage-200);
        border: 1px solid var(--sage-400);
        color: var(--sage-800);
        font-weight: 600;
        padding: .35rem .75rem;
        letter-spacing: .2px;
    }


    .landing h1 {
        margin: .75rem 0 0.5rem;
        color: var(--sage-800);
        font-size: clamp(1.6rem, 2.6vw + 1rem, 2.25rem);
        line-height: 1.2;
    }

    .landing__lead {
        color: #2a3a33;
        max-width: 60ch;
        margin-bottom: 1.25rem;
    }

    .landing__footnote {
        color: #2a3a33;
        opacity: .9;
    }

    .landing__primary,
    .landing button,
    button.landing__primary {
        background: var(--sage-700);
        color: #fff;
        border: 1px solid var(--sage-800);
        padding: .8rem 1.1rem;
        font-weight: 600;
        box-shadow: 0 4px 0 var(--sage-800);
        transform: translateY(0);
        transition: transform .08s ease, box-shadow .08s ease, background .15s ease;
    }

        .landing__primary:hover {
            background: var(--sage-800);
        }

        .landing__primary:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0 var(--sage-800);
        }


    .landing a {
        color: var(--sage-700);
        text-decoration-color: var(--sage-400);
    }

    .landing input[type="text"],
    .landing input[type="number"],
    .landing input[type="email"],
    .landing select,
    .landing textarea {
        background: #fff;
        border: 1px solid var(--sage-300);
        padding: .55rem .7rem;
        outline: none;
        box-shadow: inset 0 1px 3px rgba(0,0,0,.04);
    }

    .landing label {
        color: var(--ink);
    }

    .landing__actions {
        display: flex;
        gap: .75rem;
        align-items: center;
    }

    @@media (max-width: 640px) {
        .landing__content

    {
        padding: 1.5rem 1.25rem;
    }

    .landing__actions {
        flex-wrap: wrap;
    }
    }
</style>
